
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>KurÃ½rnÃ­ aplikace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 10px; }
    #camera-btn { font-size: 20px; padding: 16px 32px; margin: 16px 0; background-color: #007bff; color: white; border: none; border-radius: 8px; width: 100%; }
    .address { margin: 5px 0; padding: 5px; border: 1px solid #ccc; border-radius: 4px; position: relative; }
    .delete-btn { position: absolute; top: 5px; right: 10px; background: red; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; }
    #delete-all { display: none; margin-top: 10px; background: darkred; color: white; padding: 10px; border: none; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>ðŸ“¦ KurÃ½rnÃ­ aplikace (verze 4)</h1>
  <button id="camera-btn">ðŸ“¸ Naskenovat adresu</button>
  <div id="addresses"></div>
  <button id="delete-all">ðŸ—‘ Vymazat adresy</button>
  <script>
    let addresses = JSON.parse(localStorage.getItem("addresses") || "[]");
    const container = document.getElementById("addresses");
    const deleteAllBtn = document.getElementById("delete-all");

    function render() {
      container.innerHTML = "";
      addresses.forEach((addr, idx) => {
        const div = document.createElement("div");
        div.className = "address";
        div.textContent = addr;
        const btn = document.createElement("button");
        btn.textContent = "Ã—";
        btn.className = "delete-btn";
        btn.onclick = () => {
          if (confirm("Opravdu smazat tuto adresu?")) {
            addresses.splice(idx, 1);
            save();
          }
        };
        div.appendChild(btn);
        container.appendChild(div);
      });
      deleteAllBtn.style.display = addresses.length > 0 ? "block" : "none";
    }

    function save() {
      localStorage.setItem("addresses", JSON.stringify(addresses));
      render();
    }

    document.getElementById("camera-btn").onclick = async () => {
      const text = prompt("OCR vÃ½stup (zatÃ­m ruÄnÄ›):");
      const cleaned = text.replace(/[^\w\s\/\-\.]/g, "").trim();
      if (!cleaned) return;
      if (addresses.includes(cleaned)) {
        alert("Adresa jiÅ¾ naskenovÃ¡na");
        return;
      }
      addresses.push(cleaned);
      save();
    };

    deleteAllBtn.onclick = () => {
      if (confirm("Chcete opravdu vymazat vÅ¡echny adresy?")) {
        addresses = [];
        save();
      }
    };

    render();
  </script>
</body>
</html>
